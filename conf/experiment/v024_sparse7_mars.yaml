# @package _global_
# Experiment: 3-view (120° spacing) + 7 keypoints (MARS style)
# Purpose: Test if increased keypoints compensate for reduced views
#
# Usage:
#   Debug:  ./run_experiment.sh v024_sparse7_mars --debug
#   Full:   ./run_experiment.sh v024_sparse7_mars

defaults:
  - override /dataset: markerless

experiment_name: v024_sparse7_mars
experiment_description: "3 views (120° spacing) with 7 MARS-style keypoints"

data:
  views_to_use: [0, 2, 4]  # 120° spacing - optimal 3-view configuration

fitter:
  render_cameras: [0, 2, 4]
  use_keypoints: true
  keypoint_num: 7
  # MARS keypoint indices: left_ear, right_ear, nose, neck, tail_base, left_hip, right_hip
  sparse_keypoint_indices: [0, 1, 2, 3, 5, 18, 21]
  with_render: true

# Optimization settings (increased for fewer views)
optim:
  solve_step0_iters: 20
  solve_step1_iters: 150
  solve_step2_iters: 50

# Loss weights (stronger regularization for 3-view)
loss_weights:
  theta: 5.0
  "3d": 2.5
  "2d": 0.4
  bone: 0.5
  scale: 0.5
  chest_deformer: 0.1
  stretch: 1.0
  temp: 0.25
  temp_d: 0.2
  mask_step0: 300.0
  mask_step1: 400.0
  mask_step2: 3500.0

keypoint_weights:
  default: 1.0
  # NOTE: idx refers to sparse array position, NOT original keypoint index
  # sparse_keypoint_indices: [0, 1, 2, 3, 5, 18, 21]
  # pos 0=left_ear, 1=right_ear, 2=nose, 3=neck, 4=tail_base, 5=left_hip, 6=right_hip
  idx_4: 2.0      # tail_base (original idx 5) - important for body axis
  tail_step2: 10.0
